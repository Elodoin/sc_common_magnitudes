<?xml version="1.0" encoding="UTF-8"?>
<seiscomp>
	<plugin name="mb_Lg">
		<extends>global</extends>
		<description>
		Custom mbLg events measured on horizontal components with 
        correction for each component, from LÃ³pez, C. (2008).
		</description>
		<configuration>
			<extend-struct type="GlobalMagnitudeProfile" match-name="mb_Lg">
				<extend-struct type="GlobalMagnitudeRegionProfile">
					<parameter name="distMode" type="string">
						<description>
						Considered distance measure between source and receiver.
						Possible values are

						hypocentral: hypocentral distance

						epicentral: epicentral distance
						</description>
					</parameter>
					<parameter name="calibrationType" type="string" unit="">
						<description>
						Type of magnitude calibration formula to be considered.
						The calibration parameters are considered accordingly.
						Currently supported are

						&quot;parametric&quot;: consider parameters of parametric
						configuration in parametric section

						&quot;A0&quot;: consider parameters of non-parametric
						configuration in A0 section.
						</description>
					</parameter>
					<group name="A0">
						<description>
						Parameters for A0, non-parametric magnitude calibration.
						</description>
						<parameter name="logA0" type="string">
							<description>
							Overrides the calibration function log10(A0)
							for computing mb_Lg per region. See logA0
							description in the bindings.
							</description>
						</parameter>
					</group>

					<group name="parametric">
						<description>
						Parameters for parametric magnitude calibration:
						mb_Lg = log10(A) + c0 * log10(r) + c1 * r + c2

						</description>
						<parameter name="c0" type="double">
							<description>
							Overrides the calibration parameter c0
							</description>
						</parameter>

						<parameter name="c1" type="double">
							<description>
							Overrides the calibration parameter c1
							for computing mb_Lg per region. See c1
							description in the bindings.
							</description>
						</parameter>
						<parameter name="c2" type="double">
							<description>
							Overrides the calibration parameter c2
							for computing mb_Lg per region. See c2
							description in the bindings.
							</description>
						</parameter>

					</group>
				</extend-struct>
			</extend-struct>
		</configuration>
	</plugin>
	<binding name="mb_Lg" module="global">
		<description>
		Custom magnitude for local events measured on horizontal components
		</description>
		<configuration>
			<group name="amplitudes">
				<group name="mb_Lg">
					<description>
					Parameters for measuring mb_Lg amplitudes. Add more parameters
					by adding an amplitude type profile 'mb_Lg',
					</description>
					<parameter name="preFilter" type="string" default="BW(3,0.5,12)">
						<description>
						The filter applied to raw records before applying
						Wood-Anderson simulation.
						</description>
					</parameter>
					<parameter name="applyWoodAnderson" type="boolean" default="false">
						<description>
						Applying Wood-Anderson simulation. To achieve displacement
						records without WA simulation, an integration filter can
						be applied with the pre-filter.
						</description>
					</parameter>
					<parameter name="amplitudeScale" type="string" default="1.0">
						<description>
						Scaling value multiplied to the measured amplitudes to
						match the amplitude units expected by the magnitude
						calibration function.

						Expected amplitudes are
						in units of mym but actual amplitudes provided from
						Wood-Anderson-corrected seismograms are in units of mm:
						amplitudeScale = 1000.

						If data are not corrected for WA, measured amplitudes
						take the unit of gain-corrected data considering the
						preFilter:
						amplitudeScale converts between units of measured and
						excpected amplitude.
						</description>
					</parameter>
					<parameter name="measureType" type="string" default="AbsMax">
						<description>
						Type for measuring amplitudes. Available:

						AbsMax: absolute maximum

						MinMax: half difference between absolute maximum and minimum

						PeakTrough: half difference between maximum and minimum
						on a half cycle
						</description>
					</parameter>
					<parameter name="combiner" type="string" default="max">
						<description>
						Define how to combine the amplitudes measured on both
						horizontals components:

						min: take the minimum

						max: take the maxium

						avgerage: form the average

						geometric_mean: form the geometric mean
						</description>
					</parameter>
				</group>
			</group>
			<group name="magnitudes">
				<group name="mb_Lg">
					<description>
					Parameters for computing mb_Lg magnitudes from mb_Lg amplitudes.
					</description>
					<parameter name="distMode" type="string" default="hypocentral">
						<description>
						Considered distance measure between source and receiver.
						Possible values are

						hypocentral: hypocentral distance

						epicentral: epicentral distance
						</description>
					</parameter>
					<parameter name="minDist" type="double" default="-1.0" unit="deg">
						<description>
						The minimum distance for computing magnitudes from amplitudes.
						Negative values deactivate the check.
						</description>
					</parameter>
					<parameter name="maxDist" type="double" default="8" unit="deg">
						<description>
						The maximum distance for computing magnitudes from amplitudes.
						Negative values deactivate the check.
						</description>
					</parameter>
					<parameter name="maxDepth" type="double" default="80" unit="km">
						<description>
						The maximum depth up to which magnitudes are computed.
						</description>
					</parameter>
					<parameter name="calibrationType" type="string" default="&quot;parametric&quot;" unit="">
						<description>
						Type of magnitude calibration formula to be considered.
						The calibration parameters are considered accordingly.
						Currently supported are

						&quot;parametric&quot;: consider parameters of parametric
						configuration in parametric section

						&quot;A0&quot;: consider parameters of non-parametric
						configuration in A0 section.
						</description>
					</parameter>
					<group name="A0">
						<description>
						Parameters for A0, non-parametric magnitude calibration.
						Considered if magnitude.mb_Lg.calibrationType = "A0".
						</description>
						<parameter name="logA0" type="string" default="0:-1.3,60:-2.8,100:-3.0,400:-4.5,1000:-5.85">
							<description>
							The non-parametric calibration function log10(A0).

							Format: any list of distance-value pairs separated by
							comma. Values within pairs are separated by colon.

							Example: &quot;0:-1.3,60:-2.8,100:-3.0,400:-4.5,1000:-5.85&quot;
							specifies 4 distance intervals from
							0...60, 60...100, 100...400 and 400...1000 km distance.
							Within these intervals log10(A0) is interpolated linearly
							between -1.3...-2.8, -2.8...-3.0, -3.0...-4.5 and -4.5...-5.8,
							respectively.

							Note: The first and last distance samples limit the
							maximum distance range for computing MLv.
							</description>
						</parameter>
					</group>
					<group name="parametric">
						<description>
						Parameters for parametric magnitude calibration:
						mb_Lg = log10(A) + c0 * log10(r) + c1 * r + c2
						Considered if magnitude.mb_Lg.calibrationType = "parametric".
						</description>
						<parameter name="c0" type="double" default="1.17">
							<description>
							Station correction. This is the calibration value 'c0'
							applied in the magnitude calibration formula for the north component or
                            the closest component to the north. If amplitude is measured in the north
                            component, c0(station_horizontal_component) =  c0_first

							mb_Lg = log10(A) + c0 * log10(r) + c1 * r + c2
							</description>
						</parameter>
						<parameter name="c1" type="double" default="0.0012">
							<description>
							The calibration value 'c1' applied in the magnitude
							calibration formula

							mb_Lg = log10(A) + c0 * log10(r) + c1 * r + c2
							</description>
						</parameter>
						<parameter name="c2" type="double"  default="0.67">
							<description>
							The calibration value 'c2' applied in the
							magnitude calibration formula

							mb_Lg = log10(A) + c0 * log10(r) + c1 * r + c2
							</description>
						</parameter>
					</group>
				</group>
			</group>
		</configuration>
	</binding>
</seiscomp>
